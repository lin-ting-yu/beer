"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ajaxEvent(){detectWebGLContext({supported:function(){$.ajax({url:"./JSON/beer-data.json",type:"get",dataType:"text",error:function(e){console.log(e)},success:function(e){function i(){window.beerData=$.parseJSON(e),$loadingHandle.keyDom=$($loadingHandle.key),$loadingHandle.setSetp(.25),loadingObj(beerData,bindingEvent)}detectIE({isIE:function(o){getInclude("./include/include-error-ie.html",function(e){var t=$(e),n=(new Date).getFullYear();t.find(".error-text .text").html("No one is using IE in "+n+"<br>It may make you have a bad experience"),o<=10?t.find(".error-small-btn-content").remove():11===o&&t.find(".error-small-btn-content .link-content").on("click",function(e){e.preventDefault(),t.remove(),i()}),$("body").append(t)})},notIE:function(){i()}})}})},enabled:function(){getInclude("./include/include-error-webgl.html",function(e){$("body").html(e)})}})}function bindingEvent(){function u(e,n,t,o,i,a){eventData[t]||(eventData[t]=!0,setTimeout(function(){a&&a(),$.each(e,function(e,t){t[n](i)}),eventData[t]=!1},o))}var e=[$headerHandle,$modalHandle,$threeHandle,$sectionHandle,$drawIconHandle,$inputHandle,$textareaHandle,$contactHandle,$loadingHandle,$windowSizeHandle,$mobileScrollHandle,$tooltipHandle],n=[],o=[],m=[],i=[],a=[],w=[],s=[],r=[],l=[],h=[],c=0,d=!1;isMobile&&$("body").addClass("isMobile"),$.each(e,function(e,t){"string"==typeof t.key&&(t.keyDom=$(t.key),t.keyHas=0<t.keyDom.length),t.hasOwnProperty("initial")&&t.initial(),t.hasOwnProperty("onResize")&&n.push(t),t.hasOwnProperty("onScroll")&&o.push(t),t.hasOwnProperty("onDraw")&&m.push(t),t.hasOwnProperty("onMouseMove")&&i.push(t),t.hasOwnProperty("onMouseDown")&&a.push(t),t.hasOwnProperty("onMouseUp")&&w.push(t),t.hasOwnProperty("onWheel")&&r.push(t),t.hasOwnProperty("onClick")&&s.push(t),t.hasOwnProperty("onRotate")&&l.push(t),t.hasOwnProperty("onGyro")&&h.push(t)}),windowJquery.resize(function(){u(n,"onResize","isResize",200,null,function(){$windowData.oldWidth=$windowData.width,$windowData.width=windowJquery.outerWidth(),$windowData.oldInHeight=$windowData.inHeight,$windowData.inHeight=window.innerHeight,isMobileContent=isMobile&&$windowData.width<=900,$windowData.aspectRatio.old=$windowData.aspectRatio.now,$windowData.aspectRatio.now=$windowData.inHeight/$windowData.width})}),$("body").on("mousewheel",function(e,t,n,o){if(eventData.isWheel){if(c+=t,!d&&3<=Math.abs(c)){d=!0;var i=null;c<=-3?i="down":3<=c&&(i="up"),$.each(r,function(e,t){t.onWheel(i)})}}else c=0,eventData.isWheel=!0;setTimeout(function(){eventData.isWheel=!1,d=!1},200)}),windowJquery.on("scroll",function(e){u(o,"onScroll","isScroll",50)}),windowJquery.on("mousemove touchmove",function(e){u(i,"onMouseMove","isMouseMove",5,e,function(){$windowData.mouseX="number"==typeof e.pageX?e.pageX:e.originalEvent.touches[0].pageX,$windowData.mouseY="number"==typeof e.pageY?e.pageY:e.originalEvent.touches[0].pageY,$windowData.mouseDownPos.x?($windowData.mouseDownMoveLength.x=$windowData.mouseDownPos.x-$windowData.mouseX,$windowData.mouseDownMoveLength.y=$windowData.mouseDownPos.y-$windowData.mouseY):($windowData.mouseDownMoveLength.x=null,$windowData.mouseDownMoveLength.y=null)})}),windowJquery.on("mousedown touchstart",function(e){$windowData.mouseX="number"==typeof e.pageX?e.pageX:e.originalEvent.touches[0].pageX,$windowData.mouseY="number"==typeof e.pageY?e.pageY:e.originalEvent.touches[0].pageY,u(a,"onMouseDown","isMouseDown",50);var h=$windowData.mouseX,c=$windowData.mouseY,d=Date.now();$windowData.mouseDownPos.x=h,$windowData.mouseDownPos.y=c,windowJquery.off("mouseup touchend").on("mouseup touchend",function(e){var t=$windowData.mouseX,n=$windowData.mouseY;$windowData.mouseDownPos.x=null,$windowData.mouseDownPos.y=null;var o=Date.now()-d,i=t-h,a=n-c,s=Math.abs(i),r=Math.abs(a),l=null;r<s?(o<300&&50<s||3*s>$windowData.width)&&(l=0<i?"left":"right"):(o<300&&50<r||3*r>$windowData.inHeight)&&(l=0<a?"up":"down"),u(w,"onMouseUp","isMouseUp",50),u(m,"onDraw","isDraw",50,l)})}),$("body").on("click",function(){u(s,"onClick","isClick",50)}),isMobile&&window.addEventListener("deviceorientation",function(e){u(h,"onGyro","isGyro",50,e,function(){$windowData.gyro.alpha=e.alpha,$windowData.gyro.beta=e.beta,$windowData.gyro.gamma=e.gamma})},!1)}function loadingObj(o,e){$loadingHandle.setSetp(.5),function t(n){if(n>=o.length)return e(),void $loadingHandle.setSetp(.7);(new THREE.OBJLoader).load(o[n].objUrl,function(e){o[n].loadedMesh=e,t(++n)})}(0)}function CteatrEasing(t,n,o,i){return function(e){return bezier_point(e,[0,0],[t,n],[o,i],[1,1])[1]}}function bezier_coordinate(e,t,n,o,i){return t*Math.pow(1-e,3)+3*n*e*Math.pow(1-e,2)+3*o*Math.pow(e,2)*(1-e)+i*Math.pow(e,3)}function bezier_point(e,t,n,o,i){return[bezier_coordinate(e,t[0],n[0],o[0],i[0]),bezier_coordinate(e,t[1],n[1],o[1],i[1])]}function arrayRandom(e){return e[Math.floor(e.length*Math.random())]}function deepForEach(e,t){var n={};for(var o in e)"object"===_typeof(e[o])?n[o]=deepForEach(e[o],t):t(n,o,e[o],e);return n}function detectWebGL(){if(window.WebGLRenderingContext){var e=document.createElement("canvas"),t=["webgl","experimental-webgl","moz-webgl","webkit-3d"],n=!1;for(var o in t)try{if((n=e.getContext(t[o]))&&"function"==typeof n.getParameter)return 1}catch(e){}return 0}return-1}function detectWebGLContext(e){0<=detectWebGL()?e.supported():e.enabled()}function detectIE(e){var t=document.all&&document.compatMode,n=window.navigator.msPointerEnabled;if(t||n){var o=t?10:11;e.isIE(o)}else e.notIE()}function getInclude(e,t,n){$.ajax({url:e,type:"get",dataType:"text",error:function(e){console.log(e),n(e)},success:function(e){t(e)}})}var _createClass=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};if(null==window.console){var em=function(){};window.console={log:em,debug:em,info:em,warn:em}}if(""==typeof console){em=function(){};console={log:em,debug:em,info:em,warn:em}}if(null==console.log||"undefined"==console.log){em=function(){};console.log=em}if(null==console.debug||"undefined"==console.debug){em=function(){};console.debug=em}if(null==console.info||"undefined"==console.info){em=function(){};console.info=em}if(null==console.warn||"undefined"==console.warn){em=function(){};console.warn=em}var windowJquery=$(window),eventData={isResize:!1,isScroll:!1,isClick:!1,isWheel:!1,isDraw:!1,isMouseDown:!1,isMouseUp:!1,isMouseMove:!1,isGyro:!1},$windowData={width:windowJquery.outerWidth(),oldWidth:windowJquery.outerWidth(),inHeight:window.innerHeight,oldInHeight:window.innerHeight,aspectRatio:{now:0,old:0},scrollTop:windowJquery.scrollTop(),mouseX:0,mouseY:0,mouseDownPos:{x:null,y:null},mouseDownMoveLength:{x:null,y:null},gyro:{alpha:null,beta:null,gamma:null}};$windowData.aspectRatio.now=$windowData.aspectRatio.old=$windowData.inHeight/$windowData.width;var isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent),isMobileContent=isMobile&&$windowData.width<=900,beer=void 0,threeJsControlData={gyroBase:{alpha:null,beta:null,gamma:null},moveX:-30,mouseXPercen:15/$windowData.width,moveY:0,mouseYPercen:15/$windowData.inHeight,windowHalfX:window.innerWidth/2,windowHalfY:window.innerHeight/2,speed:.01,trun:1,activeIndex:0,oldActiveIndex:0,mirror:1,transformXing:!1,bastSizeLimit:{height:800,ratio:.625},foodPosData:{larger900:{scale:1,position:{x:-2,y:0,z:18},rotation:{y:Math.PI+.3}},"smaller900&larger480":{scale:1,position:{x:18,y:8,z:18},rotation:{y:Math.PI+1}},smaller480:{scale:.8,position:{x:20,y:13,z:18},rotation:{y:Math.PI+1}}},windowActivePosData:{larger900:{activePosSection1:{scale:1.2,position:{x:-22,y:-3},rotation:{z:.5},itemGap:30},activePosSection2:"activePosSection1",activePosSection3:{scale:.5,position:{x:-30,y:-5},rotation:{z:.5},itemGap:20}},"smaller900&larger480":{activePosSection1:{scale:1,position:{x:0,y:3},rotation:{z:.5},itemGap:30},activePosSection2:{scale:1.2,position:{x:20,y:5},rotation:{z:.5},itemGap:50},activePosSection3:{scale:.5,position:{x:-18,y:-1},rotation:{z:.5},itemGap:20}},smaller480:{activePosSection1:{scale:.7,position:{x:0,y:7},rotation:{z:.5},itemGap:30},activePosSection2:{scale:1.2,position:{x:15,y:5},rotation:{z:.9},itemGap:50},activePosSection3:{scale:.5,position:{x:-10,y:5},rotation:{z:.5},itemGap:20}}},activePos:null,activePosSection2:null,activePosSection3:null,foodPos:null},beerThreeData=[],materialObj={_glassMaterialData:{urls:["img/white-room/px.jpg","img/white-room/nx.jpg","img/white-room/py.jpg","img/white-room/ny.jpg","img/white-room/pz.jpg","img/white-room/nz.jpg"]},textureCube:null,_textureLoader:new THREE.TextureLoader,_CubeTextureLoader:new THREE.CubeTextureLoader,glassMaterial:function(e){var t={color:16777215,flatShading:!0,envMap:this.textureCube,transparent:!0,side:THREE.BackSide,shininess:100};return"object"===(void 0===e?"undefined":_typeof(e))&&$.extend(t,e),new THREE.MeshPhongMaterial(t)},coverAndLogo:function(e){var t={metalness:.05,roughness:.9,side:THREE.DoubleSide,transparent:!0};return"object"===(void 0===e?"undefined":_typeof(e))&&$.extend(t,e),new THREE.MeshStandardMaterial(t)},foodPlane:function(e){return new THREE.MeshBasicMaterial({color:16777215,map:materialObj._textureLoader.load(e),transparent:!0})}};materialObj.textureCube=(new THREE.CubeTextureLoader).load(materialObj._glassMaterialData.urls),materialObj.textureCube.mapping=THREE.CubeRefractionMapping;var $tooltipHandle={key:".beer-comp-tooltip",template:' \n            <div class="beer-comp-tooltip">\n                <div class="tooltip-content">\n                    <div class="tooltip-info">\n                        <div class="left-content">\n                            <div class="img-content">\n                                <img src="" alt="" class="img" draggable="false">\n                            </div>\n                        </div>\n                        <div class="right-content">\n                            <div class="title-content">\n                                <span class="text"></span>\n                            </div>\n                            <div class="text-content">\n                                <span class="text"></span>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="tooltip-arrow"></div>\n                </div>\n            </div>',DOMsList:[],hasOpen:!1,bindingEvent:function(e){var t=this,n=$(e);n.on("mousedown tauchstart",function(e){t.closeAll(),e.stopPropagation(),e.preventDefault(),n.addClass("active"),t.handlePos($(this)),t.hasOpen=!0}),this.DOMsList.push(n)},closeAll:function(){this.hasOpen&&(this.DOMsList.forEach(function(e){e.removeClass("active")}),this.hasOpen=!1)},handlePos:function(e){var t=e.find(".tooltip-content");t.css("margin-left","");var n=t.get(0).getBoundingClientRect(),o=e.find(".tooltip-arrow");if(o.css("margin-left",""),n.left<15){var i=15-n.left;t.css("margin-left",i+"px"),o.css("margin-left",-i+"px")}else if(15<n.right-$windowData.width){var a=n.right-$windowData.width;t.css("margin-left",-a+"px"),o.css("margin-left",a+"px")}},onResize:function(){if(this.hasOpen){var n=this;this.keyDom.each(function(e,t){n.handlePos($(t))})}},onMouseDown:function(){this.closeAll()},onClick:function(){},initial:function(){var n=this;this.keyDom.each(function(e,t){n.bindingEvent(t),$(t).on("mouseenter",function(e){$drawIconHandle.setTrackDOM(t),$drawIconHandle.setToUnderlindPos()}).on("mouseleave",function(e){$drawIconHandle.removeUnderlindPos()})})}},$mobileScrollHandle={key:".layout-content .layout-row",onInnerScrollObjs:[],scrollData:{oldScrollTop:0,scrollTop:0,direction:0},addEventList:function(e,t){var n={obj:e,fns:t};this.onInnerScrollObjs.push(n)},scrollTop:function(e){this.keyDom.scrollTop(e)},onInnerScroll:function(n){var e=$mobileScrollHandle;e.scrollData.scrollTop=this.scrollTop,e.scrollData.direction=e.scrollData.scrollTop-e.scrollData.oldScrollTop,e.scrollData.oldScrollTop=this.scrollTop,n.scrollData=e.scrollData,e.onInnerScrollObjs.forEach(function(t){t.fns.forEach(function(e){t.obj[e](n)})})},initial:function(){this.keyDom.on("scroll",this.onInnerScroll)}},$windowSizeHandle={key:".beer-comp-window-size",keyBeers:null,invertedBeer:[],invertedClass:["inverted-right","inverted-left"],keyArrow:{height:null,width:null},keyPrompt:null,windowWidthSmall:!1,windowHeightSmall:!1,_initChildDOM:function(){this.keyBeers=this.keyDom.find(".beer-content"),this.keyArrow.height=this.keyDom.find(".hendle-height"),this.keyArrow.width=this.keyDom.find(".hendle-width"),this.keyPrompt=this.keyDom.find(".prompt-text")},handleSize:function(){$windowData.width<=900&&(this.windowWidthSmall=!0),$windowData.inHeight<=500&&(this.windowHeightSmall=!0)},handleArrow:function(){this.windowWidthSmall?this.keyArrow.width.addClass("show"):this.keyArrow.width.removeClass("show"),this.windowHeightSmall?this.keyArrow.height.addClass("show"):this.keyArrow.height.removeClass("show")},handleBeerInverted:function(){var o=this;this.keyBeers.each(function(e,t){var n=t.getBoundingClientRect();-1===o.invertedBeer.indexOf(t)&&(n.left<=0?(t.classList.add("inverted-right"),o.invertedBeer.push(t)):n.right>$windowData.width?(t.classList.add("inverted-left"),o.invertedBeer.push(t)):n.top<0&&(t.classList.add(arrayRandom(o.invertedClass)),o.invertedBeer.push(t)))})},handlePromptText:function(){this.invertedBeer.length&&this.keyPrompt.addClass("toggle"),this.invertedBeer.length===this.keyBeers.length&&this.keyPrompt.addClass("toggle-2")},reset:function(){this.windowWidthSmall=!1,this.windowHeightSmall=!1,this.keyDom.removeClass("show"),this.invertedBeer.forEach(function(e){e.classList.remove("inverted-right"),e.classList.remove("inverted-left")}),this.invertedBeer=[],this.keyArrow.height.removeClass("show"),this.keyArrow.width.removeClass("show"),this.keyPrompt.removeClass("toggle toggle-2")},handleAll:function(){isMobile||(this.handleSize(),(this.windowWidthSmall||this.windowHeightSmall)&&(this.keyDom.addClass("show"),this.handleArrow(),this.handleBeerInverted(),this.handlePromptText(),900<$windowData.width&&(this.windowWidthSmall=!1),500<$windowData.inHeight&&(this.windowHeightSmall=!1),this.windowWidthSmall||this.windowHeightSmall||this.reset()))},onResize:function(){this.handleAll()},initial:function(){this._initChildDOM(),this.handleAll()}},$loadingHandle={key:".beer-comp-loading",stepType:[25,50,70,100],setSetp:function(n){n=Math.floor(100*n);var e=this.stepType.filter(function(e,t){return n<=e})[0]||0;this.keyDom.addClass("step"+e)},final:function(){var e=this;this.keyDom.addClass("start"),setTimeout(function(){e.keyDom.hide()},1e3)},initial:function(){this.keyDom.on("click mousedown mouseup",function(e){e.preventDefault(),e.stopPropagation()})}},$contactHandle={key:"#popup-contact",keyContent:null,keyButton:null,keyForm:null,sandAnEasing:CteatrEasing(.57,-.59,.95,-.39),isSand:!1,sandAn:function(){return new TWEEN.Tween({y:0,rotate:0,scale:1}).to({y:-1e3,rotate:150,scale:.6},1e3).easing(this.sandAnEasing)},_initChildDOM:function(){this.Button=this.keyDom.find(".modal-footer .btn-content .link-content"),this.keyContent=this.keyDom.find(".modal-content"),this.keyForm=this.keyDom.find("form")},_initEvent:function(){var e=this,t=this;this.Button.on("click",function(e){e.preventDefault(),t.isSand||t.submitAn()}),this.keyDom.on("hidden.bs.modal",function(){e.submitAnReset()})},submitAn:function(){var n=this;this.keyDom.addClass("contact-to-white"),this.keyContent.css("height",this.keyContent.height()+"px"),this.isSand=!0,setTimeout(function(){n.isSand&&(n.keyDom.addClass("contact-to-mail"),setTimeout(function(){n.isSand&&(n.keyDom.addClass("contact-mail-close"),setTimeout(function(){n.isSand&&(n.keyDom.addClass("contact-sand"),n.sandAn().onUpdate(function(e){if(n.isSand){var t="translateY("+e.y+"px) rotate("+e.rotate+"deg) scale("+e.scale+")";n.keyContent.css("transform",t)}}).start())},500))},700))},800)},submitAnReset:function(){this.isSand&&(this.keyForm.get(0).reset(),this.keyContent.attr("style",""),this.keyDom.removeClass("contact-to-white"),this.keyDom.removeClass("contact-to-mail"),this.keyDom.removeClass("contact-mail-close"),this.keyDom.removeClass("contact-sand"),this.isSand=!1,$inputHandle.checkAllVal(this.keyDom),$textareaHandle.checkAllVal(this.keyDom))},initial:function(){this._initChildDOM(),this._initEvent()}},$inputHandle={key:".beer-form-el-input",keyFormDOM:null,_initChildDOM:function(){this.keyFormDOM=this.keyDom.find("input")},_initEvent:function(){var t=this;this.keyFormDOM.on("focus",function(){$(this).parents(t.key).addClass("is-focus")}),this.keyFormDOM.on("blur",function(){var e=$(this);""===e.val()&&e.parents(t.key).removeClass("is-focus")})},checkAllVal:function(e){(e=e?$(e).find(".beer-form-el-input input"):$inputHandle.keyFormDOM).each(function(e,t){var n=$(t),o=n.parents($inputHandle.key);""!==n.val()?o.addClass("is-focus"):o.removeClass("is-focus")})},initial:function(){this._initChildDOM(),this._initEvent(),this.checkAllVal()}},$textareaHandle={key:".beer-form-el-textarea",keyFormDOM:null,_initChildDOM:function(){this.keyFormDOM=this.keyDom.find("textarea")},_initEvent:function(){$inputHandle._initEvent.call(this);var e=this;this.keyFormDOM.on("input",function(){e._checkSize(this)})},checkAllVal:function(e){(e=e?$(e).find(".beer-form-el-textarea textarea"):$textareaHandle.keyFormDOM).each(function(e,t){var n=$(t),o=n.parents($textareaHandle.key);""!==n.val()?o.addClass("is-focus"):o.removeClass("is-focus")})},checkAllSize:function(e){(e=e?$(e).find(".beer-form-el-textarea textarea"):$textareaHandle.keyFormDOM).each(function(e,t){$textareaHandle._checkSize(t)})},_checkSize:function(e){var t;e.style.height="120px",t=120<e.scrollHeight?e.scrollHeight:120,e.style.height=t+"px"},onResize:function(){this.checkAllSize()},initial:function(){this._initChildDOM(),this._initEvent(),this.checkAllVal(),$modalHandle.addEventList("shown",this.checkAllSize)}},$modalHandle={key:".modal",isModalOpen:!1,eventsList:{show:[],shown:[],hide:[],hidden:[]},_initBindEvent:function(){var t=this,n=this,e=function(e){t.keyDom.on(e+".bs.modal",function(t){n.eventsList[e].forEach(function(e){e(t.target)})})};for(var o in this.eventsList)e(o)},_initDefaultEvent:function(){var e=this;this.addEventList("show",function(){e.isModalOpen=!0,$("body").addClass("content-blur")}),this.addEventList("hidden",function(){e.isModalOpen=!1,$("body").removeClass("content-blur")})},addEventList:function(e,t){this.eventsList[e].push(t)},reomveEventList:function(e,t){var n=this.eventsList[e],o=thisEvent.indexOf(t);-1<o&&n.splice(o,1)},initial:function(){this._initBindEvent(),this._initDefaultEvent()}},$drawIconHandle={key:"#draw-icon",keyUnderline:null,keyCircle:null,time:0,countTime:null,mouseTrack:!0,iconToUnderlineDOM:null,mousePos:{x:0,y:0,nextX:0,nextY:0},handleShow:function(){5<this.time&&(this.keyDom.addClass("hide"),this.time=0,clearInterval(this.countTime),this.countTime=null)},stopMouseTrack:function(){this.mouseTrack=!1},startMouseTrack:function(){this.mouseTrack=!0},setPos:function(){var e=this;setInterval(function(){$modalHandle.isModalOpen||(e.mousePos.x+=.1*(e.mousePos.nextX-e.mousePos.x),e.mousePos.y+=.1*(e.mousePos.nextY-e.mousePos.y),e.keyDom.css("left",e.mousePos.x+"px"),e.keyDom.css("top",e.mousePos.y+"px"))},10)},setNextPos:function(){this.mouseTrack&&(this.mousePos.nextX=$windowData.mouseX-25,this.mousePos.nextY=$windowData.mouseY-25)},setTrackDOM:function(e){this.iconToUnderlineDOM=e},setToUnderlindPos:function(){if(!$modalHandle.isModalOpen){this.stopMouseTrack();var e=this.keyDom.get(0).getBoundingClientRect(),t=this.iconToUnderlineDOM.getBoundingClientRect();this.keyDom.addClass("hide-arraw hide-scroll");var n=t.width,o=t.height,i=t.top-(e.height-o)/2,a=t.left-(e.width-n)/2;this.mousePos.nextY=i,this.mousePos.nextX=a,this.keyCircle.css("width",n+"px"),this.keyCircle.css("height",o+"px"),this.keyCircle.css("border-radius",o/2+"px")}},removeUnderlindPos:function(){if(!$modalHandle.isModalOpen){var e=this||$drawIconHandle;e.iconToUnderlineDOM=null,e.startMouseTrack(),e.keyDom.removeClass("hide-arraw hide-scroll"),e.keyCircle.css("width",""),e.keyCircle.css("height",""),e.keyCircle.css("border-radius","")}},initial:function(){isMobile||(this.mousePos.x=$windowData.mouseX,this.mousePos.y=$windowData.mouseY,this.mousePos.nextX=$windowData.mouseX,this.mousePos.nextY=$windowData.mouseY,this.setPos(),this.keyCircle=this.keyDom.find(".draw-circle"),$modalHandle.addEventList("hidden",this.removeUnderlindPos))},onMouseMove:function(){isMobile||(this.time=0,this.setNextPos())}},$headerHandle={key:".beer-comp-header",navDOM:null,logoDOM:null,itemStepDOM:null,itemStepDOMChild:{all:null,now:null},sectionStepDOM:null,sectionStepDOMChild:{li:null},nowBeerDOM:null,nowBeerTextDOM:null,childDOMInit:function(){this.itemStepDOM=this.keyDom.find(".beer-step"),this.itemStepDOMChild.all=this.itemStepDOM.find(".beer-all .text"),this.itemStepDOMChild.now=this.itemStepDOM.find(".beer-now .text"),this.sectionStepDOM=this.keyDom.find(".beer-section-step"),this.sectionStepDOMChild.li=this.sectionStepDOM.find("li"),this.nowBeerDOM=this.keyDom.find(".section-scroll-text"),this.nowBeerTextDOM=this.nowBeerDOM.find(".text"),this.navDOM=this.keyDom.find(".header-li"),this.logoDOM=this.keyDom.find(".header-logo")},beerStep:function(){this.itemStepDOMChild.all.text(beerData.length),this.itemStepDOMChild.now.text(threeJsControlData.activeIndex+1)},beerSection:function(){this.sectionStepDOMChild.li.removeClass("active"),this.sectionStepDOMChild.li.eq($sectionHandle.sectionActive).addClass("active")},childrenEvent:function(){isMobile||(this.navDOM.on("mousedown",function(e){e.stopPropagation()}).on("mouseenter",function(e){$drawIconHandle.setTrackDOM(this),$drawIconHandle.setToUnderlindPos()}).on("mouseleave",function(e){$drawIconHandle.removeUnderlindPos()}),this.logoDOM.on("mouseenter",function(e){$drawIconHandle.setTrackDOM(this),$drawIconHandle.setToUnderlindPos(),$drawIconHandle.keyDom.addClass("hide")}).on("mouseleave",function(e){$drawIconHandle.removeUnderlindPos(),$drawIconHandle.keyDom.removeClass("hide")}))},setNowBeerText:function(e){var t=this;this.nowBeerDOM.addClass("change"),setTimeout(function(){t.nowBeerTextDOM.text(e),t.nowBeerDOM.addClass("changed"),setTimeout(function(){t.nowBeerDOM.removeClass("change changed")},410)},210)},initial:function(){this.childDOMInit(),this.beerStep(),this.childrenEvent(),this.setNowBeerText(beerData[threeJsControlData.activeIndex].content.section_1.title)},onResize:function(){}},$sectionHandle={key:".content-section",itemChanged:!0,itemMoving:!1,HasMovingType:!1,sectionChanged:!0,sectionMoving:!1,sectionActive:0,nowSectionAn:null,nowBeerAn:null,nowFoodAn:null,mobileScrolling:!1,itemChangeData:{activeBeer:null,nextBeer:null,moveLength:0,num:0,next:null},cameraAn:{180:null,0:null,"-180":null,"-0":null},innerActivePos:null,dataFunction:{numToChart:{numToChartListDOM:{},fn:function(e,t){var n=e+t;if(this.numToChartListDOM[n])return this.numToChartListDOM[n];var o=$('<div class="chart-list">\n                                    <ul class="chart-ul">\n                                        <li class="chart-li"></li>\n                                        <li class="chart-li"></li>\n                                        <li class="chart-li"></li>\n                                        <li class="chart-li"></li>\n                                        <li class="chart-li"></li>\n                                    </ul>\n                                </div>'),i=o.find("li");if(1<=t)for(var a=0;a<t;a++)i.eq(a).addClass("whole");return 0<t%1&&i.eq(Math.floor(t)).addClass("half"),this.numToChartListDOM[n]=o}},tooltip:{glasswareData:{tulip:{img:"./img/glessware/glassware_tulip.svg",text:"Its short stem facilitates swirling, further enhancing your sensory experience."},"pint glass":{img:"./img/glessware/glassware_pint-glass.svg",text:"The pint glass’s basic design neither enhances nor seriously detracts from any particular beer style."}},glasswareDOM:{},parent:null,fn:function(e,t,n){var o=t.toLowerCase(),i=e+o,a=this.glasswareData[o],s=void 0;return this.glasswareDOM[i]?s=this.glasswareDOM[i]:a&&((s=$($tooltipHandle.template).find(".tooltip-content").clone()).find(".title-content .text").text(t),s.find(".text-content .text").text(a.text),s.find(".img-content .img").attr("src",a.img),this.glasswareDOM[i]=s),this.parent.html(s),t}}},setInnerActivePos:function(){0===this.sectionActive?this.innerActivePos=threeJsControlData.activePos:1===this.sectionActive?this.innerActivePos=threeJsControlData.activePosSection2:this.innerActivePos=threeJsControlData.activePosSection3},_compareData:function(e,t,n){var o=Object.prototype.toString.call(t);if("[object Object]"===o)this._dataEachObj(e,t,n);else if("[object Array]"===o)this._dataEachArr(e,t,n);else{var i=e.find('[data-key="'+n+'"]'),a=i.attr("data-fn");a&&""!==a?i.html(this.dataFunction[a].fn(n,t,i)):i.text(t)}},_dataEachObj:function(e,t,n){for(var o in t)this._compareData(e,t[o],o)},_dataEachArr:function(t,e,n){var o=this;e.forEach(function(e){o._compareData(t.find('[data-key="'+n+'"]'),e,n)})},_trunCarmraAn:function(){this.cameraAn[180]=new TWEEN.Tween(beer.camera.position).to({z:45},900),this.cameraAn[0]=new TWEEN.Tween(beer.camera.position).to({z:-45},900),this.cameraAn[-180]=new TWEEN.Tween(beer.camera.position).to({z:45},1200).onUpdate(function(){var e=-.0296*Math.pow(beer.camera.position.z,2)+30;beer.camera.position.x=e}),this.cameraAn["-0"]=new TWEEN.Tween(beer.camera.position).to({z:-45},1200).onUpdate(function(){var e=-.0296*Math.pow(beer.camera.position.z,2)+30;beer.camera.position.x=e})},_changeItemContent:function(){var i=beerData[threeJsControlData.activeIndex].content,a=this;$tooltipHandle.closeAll(),$headerHandle.setNowBeerText(i.section_1.title),this.keyDom.each(function(e,t){var n=$(t),o=n.attr("data-name");n.addClass("change"),setTimeout(function(){a._compareData(n,i[o],o),n.addClass("changed"),setTimeout(function(){n.removeClass("change changed")},410)},210)})},changeSection:function(e,t){if(this.itemChanged&&!this.itemMoving&&((this.sectionChanged||isMobileContent)&&this.sectionActive!==e||!0===t)){var n=function(){s.sectionChanged=!0,s.sectionMoving=!1,s.nowSectionAn=null},o=function(){s.nowBeerAn=null},i=function(){s.nowFoodAn=null};this.sectionChanged=!1,this.sectionMoving=!0;var a=this.sectionActive;this.sectionActive=e,this.keyDom.eq(a).removeClass("show"),this.keyDom.eq(e).addClass("show");var s=this;this.nowSectionAn&&this.nowSectionAn.stop(),this.nowBeerAn&&this.nowBeerAn.stop(),0===e?(this.nowBeerAn=$threeHandle.carousel.beerSizeToDefault(this.itemChangeData.activeBeer,o).start(),2===a&&(this.nowFoodAn&&this.nowFoodAn.stop(),this.nowFoodAn=$threeHandle.carousel.hideFoodImg(this.itemChangeData.activeBeer,i).start()),this.nowSectionAn=this.cameraAn[0].easing(TWEEN.Easing.Quadratic.Out).onComplete(n).start(),this.setInnerActivePos(),threeJsControlData.mirror=1):1===e?((2===a||isMobileContent)&&(this.nowBeerAn=$threeHandle.carousel.beerSizeToSection2(this.itemChangeData.activeBeer,o).start()),2===a?(this.nowSectionAn=this.cameraAn[-180].easing(TWEEN.Easing.Quadratic.Out).onComplete(n).start(),this.nowFoodAn&&this.nowFoodAn.stop(),this.nowFoodAn=$threeHandle.carousel.hideFoodImg(this.itemChangeData.activeBeer,i).start()):this.nowSectionAn=this.cameraAn[180].easing(TWEEN.Easing.Quadratic.Out).onComplete(n).start(),this.setInnerActivePos(),threeJsControlData.mirror=-1):2===e&&(this.nowSectionAn=this.cameraAn["-0"].easing(TWEEN.Easing.Quadratic.Out).onComplete(n).start(),threeJsControlData.mirror=1,this.setInnerActivePos(),this.nowFoodAn&&this.nowFoodAn.stop(),this.nowFoodAn=$threeHandle.carousel.showFoodImg(this.itemChangeData.activeBeer,i).start(),this.nowBeerAn=$threeHandle.carousel.beerSizeToSection3(this.itemChangeData.activeBeer,o).start()),$headerHandle.beerSection(),console.log("4 changeSection fn"+e)}},resetSettion:function(){this.stopAllAn(),$mobileScrollHandle.scrollTop(0),this.changeSection(0,!0)},_changeItemAn:function(e){if(!this.itemChanged){this.itemChanged=!0,this.itemMoving=!0;var t=this.innerActivePos.position.x,n=this.innerActivePos.itemGap;threeJsControlData.activeIndex=this.itemChangeData.next,$headerHandle.beerStep();var o=this,i=o.itemChangeData.moveLength/n,a=900-900*i,s=1-i,r=i,l=this.itemChangeData.next!==threeJsControlData.oldActiveIndex;if(!e){var h=[r,s];s=h[0],r=h[1]}$threeHandle.carousel.turnAnimation({x:o.itemChangeData.activeBeer.objs[0].position.x,opacity:s},{x:t+n*o.itemChangeData.num*threeJsControlData.mirror,opacity:0},a,o.itemChangeData.activeBeer).onStart(function(){l&&2===o.sectionActive&&$threeHandle.carousel.hideFoodImg(o.itemChangeData.activeBeer).start()}).onComplete(function(){o.itemChangeData.next=null,threeJsControlData.oldActiveIndex=threeJsControlData.activeIndex,o.itemMoving=!1,e&&o.itemChangeData.activeBeer.transform("position","x",100)}).start(),$threeHandle.carousel.turnAnimation({x:o.itemChangeData.nextBeer.objs[0].position.x,opacity:r},{x:t,opacity:1},a,o.itemChangeData.nextBeer).onStart(function(){l&&2===o.sectionActive&&$threeHandle.carousel.showFoodImg(o.itemChangeData.nextBeer).start()}).onComplete(function(){o.itemChangeData.activeBeer=beerThreeData[threeJsControlData.activeIndex]}).start(),l&&this._changeItemContent()}},_drawChange:function(){if(this.sectionChanged&&!this.sectionMoving&&!this.itemChanged&&$windowData.mouseDownPos.x){var e=function(e,t){e!==t&&(e.transform("scale","x",i),e.transform("scale","y",i),e.transform("scale","z",i),e.transform("position","y",n),e.size=t)},t=this.innerActivePos.position.x,n=this.innerActivePos.position.y,o=this.innerActivePos.itemGap,i=this.innerActivePos.scale,a=($windowData.mouseX-$windowData.mouseDownPos.x)/15*threeJsControlData.mirror;this.itemChangeData.moveLength=Math.abs(a),this.itemChangeData.moveLength=this.itemChangeData.moveLength>o?o:this.itemChangeData.moveLength,this.itemChangeData.num=0<a?-1:1,this.itemChangeData.num*=threeJsControlData.mirror,this.itemChangeData.next=$threeHandle.carousel.getNext(this.itemChangeData.num);var s=$threeHandle.carousel.getNext(-this.itemChangeData.num);this.itemChangeData.activeBeer=beerThreeData[threeJsControlData.activeIndex],this.itemChangeData.nextBeer=beerThreeData[this.itemChangeData.next],beerThreeData[s].transform("material","opacity",0),beerThreeData[s].transform("position","x",100),2===this.sectionActive?e(this.itemChangeData.nextBeer,"section3"):1===this.sectionActive?e(this.itemChangeData.nextBeer,"section2"):e(this.itemChangeData.nextBeer,"default");var r=t-a;this.itemChangeData.activeBeer.transform("material","opacity",1-this.itemChangeData.moveLength/o),this.itemChangeData.activeBeer.transform("position","x",r);var l=t-o*this.itemChangeData.num*threeJsControlData.mirror-a;this.itemChangeData.nextBeer.transform("material","opacity",this.itemChangeData.moveLength/o),this.itemChangeData.nextBeer.transform("position","x",l),this.itemChangeData.moveLength>=o/2&&this._changeItemAn()}},stopAllAn:function(){this.nowSectionAn&&(this.nowSectionAn.stop(),this.nowSectionAn=null),this.nowBeerAn&&(this.nowBeerAn.stop(),this.nowBeerAn=null),this.nowFoodAn&&(this.nowFoodAn.stop(),this.nowFoodAn=null),2!==this.sectionActive&&$threeHandle.carousel.hideFoodImg(this.itemChangeData.activeBeer).start(),self.sectionChanged=!0,self.sectionMoving=!1},onResize:function(){this.setInnerActivePos()},onMouseDown:function(){$modalHandle.isModalOpen||this.itemMoving||isMobile||(this.itemChanged=!1)},onClick:function(){this.itemMoving||(this.itemChanged=!0)},onMouseUp:function(){isMobile&&(this.mobileScrolling=!1,this.HasMovingType=!1)},onMouseMove:function(e){if(isMobile&&!this.HasMovingType){if($windowData.mouseDownMoveLength.y&&30<Math.abs($windowData.mouseDownMoveLength.y))return this.mobileScrolling=!0,void(this.HasMovingType=!0);if($windowData.mouseDownMoveLength.x&&30<Math.abs($windowData.mouseDownMoveLength.x))return this.itemChanged=!1,void(this.HasMovingType=!0)}this._drawChange()},handleSectionChangeEvent:function(e){if(!$modalHandle.isModalOpen&&!isMobileContent){var t="down"===e?1:"up"===e?-1:null,n=this.sectionActive+t;return n<0||n>=this.keyDom.length||null===t?null:n}},onDraw:function(e){var t=!0,n=this.handleSectionChangeEvent(e);if(isMobile&&"number"==typeof n&&(console.log("onDraw","this.changeSection(nextSection);"),this.changeSection(n)),!(this.itemChangeData.moveLength<=0||null===this.itemChangeData.next)){if(!this.itemChanged&&this.itemChangeData.moveLength<5&&("left"!==e||"right"!==e)){var o=[this.itemChangeData.nextBeer,this.itemChangeData.activeBeer];this.itemChangeData.activeBeer=o[0],this.itemChangeData.nextBeer=o[1],this.itemChangeData.num=-this.itemChangeData.num,this.itemChangeData.next=threeJsControlData.activeIndex,t=!1}this._changeItemAn(t)}},onWheel:function(e){if(!isMobile){var t=this.handleSectionChangeEvent(e);"number"==typeof t&&(console.log("onWheel","this.changeSection(next);"),this.changeSection(t))}},onScrollEvent:function(n){var o=null;this.keyDom.each(function(e,t){e!==self.sectionActive&&n(e,t)&&(o=e)}),null!==o&&(console.log("this.changeSection(active);"),this.changeSection(o))},onScroll:function(e){if(isMobileContent){var o=.7*$windowData.inHeight;0<e.scrollData.direction?this.onScrollEvent(function(e,t){return t.getBoundingClientRect().top<=o}):this.onScrollEvent(function(e,t){var n=t.getBoundingClientRect();return n.bottom>=o&&n.bottom<$windowData.inHeight})}},initial:function(){var o=this;this.keyDom.each(function(e,t){var n=$(t);n.hasClass("section-3")&&(o.dataFunction.tooltip.parent=n.find(".beer-comp-tooltip"))}),this.innerActivePos=threeJsControlData.activePos,this.itemChangeData.activeBeer=beerThreeData[threeJsControlData.activeIndex],this._trunCarmraAn(),this._changeItemContent(),$mobileScrollHandle.addEventList(this,["onScroll"])}},$threeHandle={key:null,carousel:null,windowSizeName:"larger900",oldWindowSizeName:"",_initWindowActivePosData:function(){for(var e in threeJsControlData.windowActivePosData){var t=threeJsControlData.windowActivePosData[e];for(var n in t){var o=t[n];"string"==typeof o&&(t[n]=t[o])}}},_setWindowSizeName:function(){this.oldWindowSizeName=this.windowSizeName,900<$windowData.width?this.windowSizeName="larger900":$windowData.width<=900&&480<$windowData.width?this.windowSizeName="smaller900&larger480":$windowData.width<=480&&(this.windowSizeName="smaller480")},_setThreeData:function(){beerData.forEach(function(e,t){beerThreeData[t]=new Beer(e)})},_createWord:function(){var e=document.getElementById("three-canvas");(beer=new ThreeScene(window.innerWidth,window.innerHeight)).scene.background=materialObj.textureCube,beer.setCamera(60,window.innerWidth/window.innerHeight,.1,2e3,new THREE.Vector3(50,10,-45),!1).setStats(document.getElementById("stats")).addLight("AmbientLight","AmbientLight",10066329).addLight("PointLight1","PointLight",16777215,new THREE.Vector3(50,150,-150)).addLight("PointLight2","PointLight",16777215,new THREE.Vector3(50,150,150)).addLight("PointLight3","PointLight",2236962,new THREE.Vector3(-500,-300,0)).rr().rendererDOM(e)},_threeJsRender:function(){beer.stats.update(),requestAnimationFrame($threeHandle._threeJsRender),TWEEN.update(),threeJsControlData.transformXing||(beer.camera.position.x+=(threeJsControlData.moveX-beer.camera.position.x)*threeJsControlData.speed),beer.camera.position.y+=(-threeJsControlData.moveY-beer.camera.position.y)*threeJsControlData.speed,beer.camera.lookAt(beer.scene.position),beer.renderer.render(beer.scene,beer.camera)},handleThreeJsControlDataRatio:function(e){var t=$windowData.aspectRatio.now>threeJsControlData.bastSizeLimit.ratio,n=t?$windowData.width*threeJsControlData.bastSizeLimit.ratio:$windowData.inHeight,o=n>threeJsControlData.bastSizeLimit.height;if(!(900<$windowData.width&&(o||t)))return e;var i=1;if(t&&(i*=n/$windowData.inHeight),o&&(i*=threeJsControlData.bastSizeLimit.height/n),o||t){var a=deepForEach(e,function(e,t,n,o){"number"==typeof n&&(e[t]=n*i)});return a.rotation&&(a.rotation=e.rotation),a}},threeJsControlDataSetting:function(){this._setWindowSizeName();var e=threeJsControlData.windowActivePosData[this.windowSizeName];threeJsControlData.activePos=this.handleThreeJsControlDataRatio(e.activePosSection1),threeJsControlData.activePosSection2=this.handleThreeJsControlDataRatio(e.activePosSection2),threeJsControlData.activePosSection3=this.handleThreeJsControlDataRatio(e.activePosSection3),threeJsControlData.foodPos=this.handleThreeJsControlDataRatio(threeJsControlData.foodPosData[this.windowSizeName])},resizeSetSetting:function(){if(this.threeJsControlDataSetting(),this.oldWindowSizeName!==this.windowSizeName||$windowData.aspectRatio.now>threeJsControlData.bastSizeLimit.ratio||$windowData.aspectRatio.old>threeJsControlData.bastSizeLimit.ratio||$windowData.inHeight!==$windowData.oldInHeight&&Math.max($windowData.inHeight,$windowData.oldInHeight)>threeJsControlData.bastSizeLimit.height){var e=$sectionHandle.sectionActive;$sectionHandle.stopAllAn();var i=0===e?"activePos":1===e?"activePosSection2":"activePosSection3",l=this.carousel.items[0].objs[0];this.carousel.items.forEach(function(s,e){var r=threeJsControlData[i],t=function(t){var e=l[t],n=r[t];if(e){if("object"===(void 0===n?"undefined":_typeof(n)))for(var o=Object.keys(e),i=0;i<o.length;i++){var a=n[o[i]];void 0!==a&&s.transform(t,o[i],a)}"number"==typeof n&&e.set&&s.objs.forEach(function(e){e[t].set(n,n,n)})}};for(var n in r)t(n);e!==threeJsControlData.activeIndex&&s.transform("position","x",100);var o=threeJsControlData.foodPos;s.transform("position","x",o.position.x,"food"),s.transform("position","y",o.position.y,"food"),s.transform("position","z",o.position.z,"food"),s.transform("rotation","y",o.rotation.y,"food"),s.transform("scale","set",o.scale,"food")}),isMobile&&(900<$windowData.oldWidth&&$windowData.width<=900||$windowData.oldWidth<=900&&900<$windowData.width)&&($sectionHandle.setInnerActivePos(),$sectionHandle.resetSettion())}},setGyroBase:function(e,t){(null===threeJsControlData.gyroBase.beta||e)&&(threeJsControlData.gyroBase.beta=$windowData.gyro.beta),(null===threeJsControlData.gyroBase.gamma||t)&&(threeJsControlData.gyroBase.gamma=$windowData.gyro.gamma)},initial:function(){isMobile&&(threeJsControlData.speed=.8),this._initWindowActivePosData(),this._setWindowSizeName(),this.threeJsControlDataSetting(),this._setThreeData(),this._createWord(),this.carousel=new CarouselBeer(beer.scene,beerThreeData,threeJsControlData),this._threeJsRender(),$loadingHandle.setSetp(1),setTimeout(function(){$loadingHandle.final()},700)},onMouseMove:function(e){if(!isMobile){var t=e.clientX*threeJsControlData.mouseXPercen,n=e.clientY*threeJsControlData.mouseYPercen;threeJsControlData.moveX=-25-t,threeJsControlData.moveY=10-n}},onGyro:function(){"number"==typeof $windowData.gyro.beta&&(this.setGyroBase(10<Math.abs($windowData.gyro.beta-threeJsControlData.gyroBase.beta)/6,10<Math.abs($windowData.gyro.gamma-threeJsControlData.gyroBase.gamma)/6),threeJsControlData.moveX=-32-($windowData.gyro.gamma-threeJsControlData.gyroBase.gamma)/6,threeJsControlData.moveY=0-($windowData.gyro.beta-threeJsControlData.gyroBase.beta)/6)},onResize:function(){beer.resize($windowData.width,$windowData.inHeight),threeJsControlData.mouseXPercen=15/$windowData.width,threeJsControlData.mouseYPercen=15/$windowData.inHeight,this.resizeSetSetting()}},Beer=function(){function t(e){_classCallCheck(this,t),this.data=e,this.objs=[],this.foodImg=[],this._createBeer(),this._createFoodImg(),this.size="default"}return _createClass(t,[{key:"smoothObj",value:function(e,t){return new SubdivisionModifier(t).modify(e)}},{key:"_createFn",value:function(e,t,n){e.geometry.computeFaceNormals(),e.geometry.computeVertexNormals();var o=e.geometry,i=this.data.children[t].objSmooth;i&&(o=this.smoothObj(e.geometry,i));var a=new THREE.Mesh(o,n);return a.name=t,a}},{key:"_createBeer",value:function(){var l=this;l.data.loadedMesh.children.forEach(function(e,t){var n=e.name.toLowerCase(),o=l.data.children[n],i=o.materialCustom?o.materialCustom:null,a=materialObj[o.material](i),s=l.data.children[n].maps;for(var r in s)a[r]=materialObj._textureLoader.load(s[r]);l.objs.push(l._createFn(e,n,a))})}},{key:"_createFoodImg",value:function(){var e=materialObj.foodPlane(this.data.foodImage),t=new THREE.PlaneBufferGeometry(60,48),n=new THREE.Mesh(t,e);n.name="food",this.foodImg.push(n)}},{key:"addTo",value:function(t,e){var n=(e=e||"all").toLowerCase();"beer"!==n&&"all"!==n||this.objs.forEach(function(e){t.add(e)}),"food"!==n&&"all"!==n||this.foodImg.forEach(function(e){t.add(e)})}},{key:"removeFrom",value:function(t){this.objs.forEach(function(e){t.remove(e)})}},{key:"transform",value:function(t,n,o,e){e="food"===e?this.foodImg:this.objs,"set"===n?e.forEach(function(e){e[t].set(o,o,o)}):e.forEach(function(e){e[t][n]=o})}}]),t}(),CarouselBeer=function(){function o(e,t,n){_classCallCheck(this,o),this.scene=e,this.active=n,this.items=t,this.init()}return _createClass(o,[{key:"init",value:function(){var n=this;this.items.forEach(function(e,t){e.transform("material","opacity",0),e.transform("rotation","z",.5),e.transform("position","y",threeJsControlData.activePos.position.y),1!==threeJsControlData.activePos.scale&&e.transform("scale","set",threeJsControlData.activePos.scale),e.transform("material","opacity",0,"food"),e.transform("position","x",threeJsControlData.foodPos.position.x,"food"),e.transform("position","y",threeJsControlData.foodPos.position.y,"food"),e.transform("position","z",threeJsControlData.foodPos.position.z,"food"),e.transform("rotation","y",threeJsControlData.foodPos.rotation.y,"food"),e.transform("scale","set",threeJsControlData.foodPos.scale,"food"),t===n.active.activeIndex?(e.transform("material","opacity",1),e.transform("position","x",threeJsControlData.activePos.position.x)):e.transform("position","x",100),e.addTo(n.scene)},this)}},{key:"turnAnimation",value:function(e,t,n,o){return new TWEEN.Tween(e).to(t,n).easing(TWEEN.Easing.Quadratic.Out).onUpdate(function(){o.transform("position","x",e.x),o.transform("material","opacity",e.opacity)})}},{key:"showFoodImg",value:function(t,e){return new TWEEN.Tween({opacity:t.foodImg[0].material.opacity}).to({opacity:1},500).easing(TWEEN.Easing.Quadratic.Out).onUpdate(function(e){t.transform("material","opacity",e.opacity,"food")}).onComplete(function(){e&&e()})}},{key:"hideFoodImg",value:function(t,e){return new TWEEN.Tween({opacity:t.foodImg[0].material.opacity}).to({opacity:0},500).easing(TWEEN.Easing.Quadratic.Out).onUpdate(function(e){t.transform("material","opacity",e.opacity,"food")}).onComplete(function(){e&&e()})}},{key:"createTween",value:function(e,t,n){n=n||700;var o=e.objs[0],i={},a={},s="";for(var r in t){var l=o[r],h=t[r];if(l&&"object"===(void 0===l?"undefined":_typeof(l)))if("object"===(void 0===h?"undefined":_typeof(h)))for(var c in l){var d=r+c;void 0!==h[c]&&(i[d]=l[c],a[d]=h[c],s+="beer.transform('"+r+"','"+c+"', transform."+d+");")}else if("number"==typeof h&&l.set){var u=Object.keys(l);i[r]=l[u[0]],a[r]=h;for(var m=0;m<u.length;m++)s+="beer.transform('"+r+"','"+u[m]+"', transform."+r+");"}}var w=new Function(["beer","transform"],s).bind(null,e);return new TWEEN.Tween(i).to(a,n).onUpdate(w)}},{key:"beerSizeToSection3",value:function(e,t){return this.createTween(e,threeJsControlData.activePosSection3).easing(TWEEN.Easing.Quadratic.Out).onComplete(function(){t&&t(),e.size="section3"})}},{key:"beerSizeToSection2",value:function(e,t){return this.createTween(e,threeJsControlData.activePosSection2).easing(TWEEN.Easing.Quadratic.Out).onComplete(function(){t&&t(),e.size="section2"})}},{key:"beerSizeToDefault",value:function(e,t){return this.createTween(e,threeJsControlData.activePos).easing(TWEEN.Easing.Quadratic.Out).onComplete(function(){t&&t(),e.size="default"})}},{key:"getNext",value:function(e){if(0===e)return null;return e+this.active.activeIndex>=this.items.length?0:e+this.active.activeIndex<0?this.items.length-1:e+this.active.activeIndex}}]),o}(),ThreeScene=function(){function n(e,t){_classCallCheck(this,n),this.width=e,this.height=t,this.scene=new THREE.Scene,this.lightList={}}return _createClass(n,[{key:"setCamera",value:function(e,t,n,o,i,a){return this.camera=new THREE.PerspectiveCamera(e,t,n,o),this.camera.position.set(i.x,i.y,i.z),this.camera.lookAt(this.scene.position),!0===a&&(this.cameraControl=new THREE.OrbitControls(this.camera)),this}},{key:"setStats",value:function(e){var t=new Stats;return(this.stats=t).setMode(0),e.appendChild(t.domElement),this}},{key:"addLight",value:function(e,t,n,o){return this.lightList[e]=new THREE[t](n),"AmbientLight"!==t&&this.lightList[e].position.set(o.x,o.y,o.z),this.scene.add(this.lightList[e]),this}},{key:"rendererDOM",value:function(e){return e.appendChild(this.renderer.domElement),this}},{key:"resize",value:function(e,t){return this.width=e,this.height=t,this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.renderer.setSize(e,t),this}},{key:"rr",value:function(){return this.renderer=new THREE.WebGLRenderer,this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.width,this.height),this.renderer.setClearColor(16720452,1),this.renderer.shadowMap.enable=!0,this}}]),n}();
//# sourceMappingURL=app-dist.js.map